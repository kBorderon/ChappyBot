<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: evenements/logs/channelCreate.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: evenements/logs/channelCreate.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const { MessageEmbed } = require("discord.js");

/**
 * Évènement channelCreate
 * @author Kévin Borderon
 * @event Client#channelCreate
 * @type {object}
 * @throws {DiscordAPIError} Missing permssions - Le bot ne dispose pas des droits suffisants pour consulter les logs serveurs
 * @description ATTENTION : une erreur peut être générée, si le bot ne dispose pas de droits assez élevés. Vous pouvez attribuer un rôle administrateur, car je ne développerai pas de commandes sensibles disponibles par l'ensemble des utilisateurs du serveur discord où se situe le bot (faites attention si vous développez des commandes sensibles : kick, ban, mute ..)
 * @property {Client} client - Référence au bot
 * @property {GuildChannel} channel - Référence au channel créé à l'instant sur le serveur discord
 */
module.exports = async (client, channel) => {
	/* ATTENTION : une erreur peut être générée, si le bot ne dispose pas de droits assez élevés. Vous pouvez attribuer un rôle administrateur, car je ne développerai pas de commandes sensibles disponibles par 	 * l'ensemble des utilisateurs du serveur discord où se situe le bot (faites attention si vous développez des commandes sensibles : kick, ban, mute ..) */

	/* L'envoi d'un message privé, génère une création de channel, pour y remédier on bloque le type dm */
	if(channel.type === "dm"){
		return;
	}

	const journauxAuditGuilde = await channel.guild.fetchAuditLogs({
		limit: 1, /* On récupère une seule instance de nos logs serveurs (le 1 équivaut à la dernière) */
		type: 'CHANNEL_CREATE' /* Type de l'évènement à récupérer (valeur : CHANNEL_CREATE = 10) */
	});

	/* On récupère la première donnée contenue dans nos journauxAuditGuilde */
	const dernierChannelCree = journauxAuditGuilde.entries.first();

	/* On récupère l'objet User ayant réalisé la création du channel */
	const { executor } = dernierChannelCree;

	const contenu = new MessageEmbed()
		.setColor("#f2e44f")
		.setTitle("Création d'un nouveau channel")
		.setTimestamp()
		.setDescription(`Création du channel **${channel.name}** !`)
		.setFooter(executor.username, executor.displayAvatarURL());

	/* On envoie le message préparé, sur le channel ayant l'ID cible */
	client.channels.cache.get('&lt;votre_id_channel>').send(contenu); /* A REMPLACER par l'id de votre salon cible */
};

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-blague_help.html">blague/help</a></li><li><a href="module-blague_run.html">blague/run</a></li><li><a href="module-feed_help.html">feed/help</a></li><li><a href="module-feed_run.html">feed/run</a></li><li><a href="module-help_help.html">help/help</a></li><li><a href="module-help_run.html">help/run</a></li><li><a href="module-membres_help.html">membres/help</a></li><li><a href="module-membres_run.html">membres/run</a></li><li><a href="module-meteo_help.html">meteo/help</a></li><li><a href="module-meteo_run.html">meteo/run</a></li><li><a href="module-ping_help.html">ping/help</a></li><li><a href="module-ping_run.html">ping/run</a></li><li><a href="module-projet_help.html">projet/help</a></li><li><a href="module-projet_run.html">projet/run</a></li><li><a href="module-rage_help.html">rage/help</a></li><li><a href="module-rage_run.html">rage/run</a></li><li><a href="module-roles_help.html">roles/help</a></li><li><a href="module-roles_run.html">roles/run</a></li><li><a href="module-sel_help.html">sel/help</a></li><li><a href="module-sel_run.html">sel/run</a></li><li><a href="module-userinfo_help.html">userinfo/help</a></li><li><a href="module-userinfo_run.html">userinfo/run</a></li><li><a href="module-userroles_help.html">userroles/help</a></li><li><a href="module-userroles_run.html">userroles/run</a></li></ul><h3>Classes</h3><ul><li><a href="Client.html">Client</a></li></ul><h3>Events</h3><ul><li><a href="Client.html#event:channelCreate">channelCreate</a></li><li><a href="Client.html#event:channelDelete">channelDelete</a></li><li><a href="Client.html#event:channelUpdate">channelUpdate</a></li><li><a href="Client.html#event:guildMemberAdd">guildMemberAdd</a></li><li><a href="Client.html#event:guildMemberRemove">guildMemberRemove</a></li><li><a href="Client.html#event:message">message</a></li><li><a href="Client.html#event:ready">ready</a></li></ul><h3>Global</h3><ul><li><a href="global.html#actualiserCompteur">actualiserCompteur</a></li><li><a href="global.html#chargerCommandes">chargerCommandes</a></li><li><a href="global.html#chargerEvenements">chargerEvenements</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Thu Jun 11 2020 23:42:00 GMT+0200 (heure d’été d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
